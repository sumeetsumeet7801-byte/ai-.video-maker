<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üé¨ AI Video Maker</title>
<style>
  :root{
    --bg:#0f172a; 
    --panel:#111827; 
    --muted:#94a3b8; 
    --text:#e5e7eb; 
    --accent:#ef4444; 
    --accent-2:#f97316; 
    --ring:#334155; 
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto; 
    background:
      radial-gradient(1200px 600px at 100% -100%, rgba(255,255,255,.06), transparent 60%),
      radial-gradient(900px 500px at -20% -50%, #ffffff0d, transparent 60%),
      var(--bg);
    color:var(--text);
  }
  .wrap{max-width:880px;margin:auto;padding:28px}
  header{
    display:flex; gap:14px; align-items:center; margin-bottom:20px;
  }
  .logo{
    width:44px;height:44px;border-radius:12px;
    background: conic-gradient(from 160deg, var(--accent), var(--accent-2));
    display:grid;place-items:center;color:#fff;font-weight:900;
    box-shadow:0 6px 24px rgba(239,68,68,.35);
  }
  h1{font-size:1.6rem;margin:0}
  p.sub{margin:2px 0 0;color:var(--muted);font-size:.95rem}

  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid var(--ring);
    border-radius:16px; padding:18px; box-shadow:0 10px 30px rgba(0,0,0,.25);
    backdrop-filter: blur(6px);
  }
  .field{margin:12px 0}
  label{display:block;margin:0 0 6px;color:#cbd5e1;font-size:.95rem}
  textarea, select, button{
    width:100%; padding:12px 14px; border-radius:12px; outline:none;
    border:1px solid var(--ring); background:#0b1220; color:var(--text);
  }
  textarea{min-height:160px; resize:vertical}
  select{
    appearance:none; background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 20 20'%3E%3Cpath fill='%23cbd5e1' d='m5.5 7 4.5 5 4.5-5z'/%3E%3C/svg%3E"); 
    background-repeat:no-repeat; background-position:right 12px center; padding-right:36px;
  }
  button{
    font-weight:700; letter-spacing:.2px; cursor:pointer; border:none;
    background:linear-gradient(90deg, var(--accent), var(--accent-2));
    box-shadow:0 8px 24px rgba(249,115,22,.35);
    transition: transform .05s ease;
  }
  button:active{ transform: translateY(1px) }
  button[disabled]{opacity:.7;cursor:not-allowed;filter:grayscale(.2)}

  .row{display:grid; gap:12px; grid-template-columns:1fr 1fr}
  @media (max-width:640px){ .row{grid-template-columns:1fr} }

  .status{margin-top:10px; color:var(--muted); min-height:22px; font-weight:600;}
  .error{color:#fecaca}  
  .success{color:#bbf7d0} 

  .result{
    margin-top:14px; display:none;
  }
  video{
    width:100%; border-radius:14px; outline:1px solid var(--ring);
    box-shadow:0 3px 10px rgba(0,0,0,0.3);
  }
  .actions{display:flex; gap:10px; margin-top:10px; flex-wrap:wrap}
  .ghost{
    background:#0b1220; border:1px solid var(--ring); color:#cbd5e1;
    box-shadow:none; padding:10px 20px; border-radius:12px;
  }

  .spinner{
    display:inline-block; width:18px; height:18px; margin-right:8px;
    border:3px solid rgba(255,255,255,.25);
    border-top-color:#fff; border-radius:50%;
    animation:spin 1s linear infinite; vertical-align:-4px;
  }
  @keyframes spin{to{transform:rotate(360deg)}}

  .help{font-size:.85rem;color:var(--muted)}
  .badge{
    font-size:.75rem; padding:2px 8px; background:#0b1220; border:1px solid var(--ring);
    border-radius:999px; margin-left:8px; color:#cbd5e1;
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">üé¨</div>
      <div>
        <h1>AI Video Maker</h1>
        <p class="sub">Paste your script ‚ûú choose options ‚ûú auto-generate video</p>
      </div>
    </header>

    <div class="card">
      <div class="field">
        <label for="script">Script <span class="badge">text only</span></label>
        <textarea id="script" placeholder="Example: A sunrise over the Himalayas, slow dolly-in, birds flying across the sky..."></textarea>
        <div class="help">Tip: 1‚Äì3 concise sentences work best. Avoid copyrighted lyrics/dialogue.</div>
      </div>

      <div class="row">
        <div class="field">
          <label for="aspect">Aspect Ratio</label>
          <select id="aspect">
            <option value="16:9">16:9 (YouTube)</option>
            <option value="9:16">9:16 (Reels/Shorts)</option>
            <option value="1:1">1:1 (Square)</option>
          </select>
        </div>
        <div class="field">
          <label for="style">Style</label>
          <select id="style">
            <option value="cinematic">Cinematic</option>
            <option value="documentary">Documentary</option>
            <option value="anime">Anime</option>
          </select>
        </div>
      </div>

      <div class="row">
        <button id="generate">‚ú® Generate Video</button>
        <button id="sample" class="ghost" type="button">Paste sample script</button>
      </div>

      <div id="status" class="status"></div>

      <div id="result" class="result">
        <video id="player" controls></video>
        <div class="actions">
          <a id="download" class="ghost" href="#" download>‚¨áÔ∏è Download</a>
          <button id="again" class="ghost" type="button">Generate another</button>
        </div>
      </div>
    </div>
  </div>

<script>
  const WORKER_URL = "https://ai-video-sumeet.workers.dev/generate";

  const $ = (s) => document.querySelector(s);
  const btn = $("#generate");
  const statusEl = $("#status");
  const resultBox = $("#result");
  const videoEl = $("#player");
  const downloadEl = $("#download");

  $("#sample").onclick = () => {
    $("#script").value =
      "Golden-hour aerial shot over green paddy fields in Karnataka, gentle drone forward, " +
      "soft mist, cinematic look, calm morning ambience.";
  };

  $("#again").onclick = () => {
    resultBox.style.display = "none";
    videoEl.src = "";
    statusEl.textContent = "";
  };

  btn.onclick = async () => {
    const script = $("#script").value.trim();
    const aspect = $("#aspect").value;
    const style = $("#style").value;

    if (!script) {
      statusEl.innerHTML = `<span class="error">‚ö†Ô∏è Please enter a script.</span>`;
      return;
    }

    btn.disabled = true;
    statusEl.innerHTML = `<span class="spinner"></span>Generating video‚Ä¶ this can take a little while.`;
    resultBox.style.display = "none";

    try {
      const res = await fetch(WORKER_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ script, aspect, style }),
      });

      const data = await res.json().catch(() => ({}));

      if (res.ok && data.video_url) {
        statusEl.innerHTML = `<span class="success">‚úÖ Video Ready!</span>`;
        videoEl.src = data.video_url;
        downloadEl.href = data.video_url;
        const name = `ai-video-${Date.now()}.mp4`;
        downloadEl.setAttribute("download", name);
        resultBox.style.display = "block";
      } else {
        const msg = (data && (data.error || data.detail)) || "Unknown error";
        statusEl.innerHTML = `<span class="error">‚ùå ${escapeHtml(String(msg))}</span>`;
      }
    } catch (err) {
      statusEl.innerHTML = `<span class="error">‚ùå ${escapeHtml(err.message)}</span>`;
    } finally {
      btn.disabled = false;
    }
  };

  function escapeHtml(s) {
    return s.replace(/[&<>"']/g, (m) => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "'" }[m]));
  }
</script>
</body>
</html>
